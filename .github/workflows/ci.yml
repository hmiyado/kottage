name: ci
on: [pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
          cache: 'yarn'
      - name: git setting
        run: |
          git config --local user.email "hmiyado@gmail.com"
          git config --local user.name "hmiyado"
      - run: yarn initialize
      - env:
          SOURCE_BRANCH: ${{ github.head_ref }}
        run: sh scripts/update-msw.sh
      - env:
          SOURCE_BRANCH: ${{ github.head_ref }}
        run: sh scripts/update-patch-package.sh
      - run: sh scripts/verify-openapi-client.sh
      - run: yarn lint
      - run: yarn test
